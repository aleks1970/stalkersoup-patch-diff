//TB3D 109993 Adapted from Meltac 2.0 DX11 shaders
#include "common.h"
#ifdef DX11

#define EPS (0.9f/255.f)
float4 main(p_screen I):COLOR {
float4 NH=tex2D (s_normal,I.tc0);
float L=NH.w*dot(Ldynamic_dir,(float3)NH)+EPS;
return float4(L,L,L,L);
}

#else

#define EPS (0.9f/255.f)
half4 main(p_screen I):COLOR {
half4 NH=tex2D (s_normal,I.tc0);
half L=NH.w*dot(Ldynamic_dir,(half3)NH)+EPS;
return half4(L,L,L,L);
}

#endif